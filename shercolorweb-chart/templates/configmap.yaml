{{- $environment := .Values.env -}}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Chart.Name }}-configmap
data: 
  {{- if .Values.store.enabled }}
  SPRING_PROFILES_ACTIVE: "{{ $environment }},postgres"
  dbPostgresUrl: "jdbc:postgresql://shercolor-postgres-postgresql-headless.{{ .Release.Namespace }}.svc.cluster.local:{{ .Values.shercolorPostgres.global.postgresql.servicePort }}/{{ .Values.shercolorPostgres.global.postgresql.postgresqlDatabase }}"
  {{- else }}
  SPRING_PROFILES_ACTIVE: "{{ $environment }},oracle"
  dbPostgresUrl: "jdbc:postgresql://loadbalancer.lb0020.sites.sherwin.com:5432/sherd?currentSchema=shercolor"
  {{- end }}
  oeBaseUrl: {{ .Values.oeBaseUrl }}
  dbUsername: {{ .Values.shercolorPostgres.global.postgresql.postgresqlUsername }}
  {{- include "shercolorweb.getEnvironmentConfig" . | nindent 2 }}